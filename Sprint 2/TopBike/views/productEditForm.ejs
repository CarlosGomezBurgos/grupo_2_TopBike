<!DOCTYPE html>
<html lang="es">
    <head>
        <%- include('partials/head.ejs') %>
        <link rel="stylesheet" href="/css/edit.css">
    </head>
    <body>
        <%- include('partials/header.ejs') %>
        <br><br><br>
        <div class="contenedor-create-form">
            <div class="errors" style="color: red;">
                <ul>
    
                </ul>
            </div>

            <div class="">
                <div class="col-12">
                    <h2 style="color: white" class="products-title">Editar Producto: <%= product.id %></h2>
                </div>
            </div>
            <div class="col-12">
                <form action="/product/update/<%= product.id %>?_method=PUT" method="POST">
                    <div class="row product-detail">
                        <div class="area col-12 col-md-6">
                            <label for="name" class="form-label">Nombre del producto:</label>
                            <input type="text" id="name" name="name" value="<%= product.name %>" class="form-input">
                        </div>
                        <% if (locals.errors && errors.name) { %>
                            <p style="color: red"><%= errors.name.msg %> </p>
                        <% } %>
                        <div class="area col-12 col-md-6">
                            <label for="price" class="form-label">Precio del producto:</label>
                            <input type="text" id="price" name="price" value="<%= product.price %>" class="form-input">
                        </div>
                        <div class="area col-12 col-md-6">
                            <label for="discount" class="form-label">Descuento:</label>
                            <input type="text" id="discount" name="discount" value="<%= product.discount %>" class="form-input">
                        </div>
                        <div class="area col-12 col-md-6">
                            <label for="category" class="form-label">Categoría:</label>
                        <select 
                            name="category" 
                            id="category" 
                            class="form-input"
                            >
                            <% for( let i = 0; i < categories.length; i++ ) { %>
                                <% if (categories[i].id == product.id_category) { %>
                                    <option value="<%= categories[i].id %>" selected>
                                        <%= categories[i].name %> 
                                    </option>
                                 
                                <% } else { %>
                                    <option value="<%= categories[i].id %>">
                                        <%= categories[i].name %> 
                                    </option>    
                                <% } %>

                            <% } %>
                            
                        </select>

                        </div>
                        <div class="col-12">
                            <label for="description" class="form-label">Descripción:</label>
                            <textarea name="description" id="description" class="form-input"><%= product.description %></textarea>
                        </div>

                        <img style="width: 30%" class="foto-producto" src="<%= product.image %> " alt="miniatura">

                        <div class="area col-12 col-md-6">
                            <label for="image" class="form-label">Imagen del producto:</label>
                            <input 
                                type="file" 
                                id="file" 
                                name="image"
                                value="<%= product.image %>"
                            >   
                        </div>

                        <div class="col-12">
                            <button type="submit" class="buy-now-button">Guardar cambios</button>
                        </div>
                        
                        <form action="/product/delete/<%= product.id %>?_method=DELETE" method="POST">
                            <button type="submit" class="buy-now-button">Borrar Producto</button>
                        </form>

                    </div>
                </form>
            </div>

        </div>
        <%- include('partials/footer.ejs') %>
        <script src="/js/productEditFormValidations.js"></script>
    </body>
</html>